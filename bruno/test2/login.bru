meta {
  name: login
  type: http
  seq: 5
}

post {
  url: https://employee.login.int.signal-iduna.org/auth/token/ccgjwt/60
  body: formUrlEncoded
  auth: basic
}

auth:basic {
  username: U167653
  password: Si6868
}

body:form-urlencoded {
  grant_type: client_credentials
}

script:post-response {
  const data = res.getBody();
  if (res.getStatus() === 200 && data.access_token) {
    bru.setVar("authToken", data.access_token);
  }
  
}

tests {
  const data = res.getBody();
  expect(res.getStatus()).to.equal(200);
  expect(data.access_token).to.exist;
}
